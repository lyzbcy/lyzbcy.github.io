---
layout: post
title: "Unity插件-Git助手开发报告"
date: 2025-11-19 18:00:00 +0800
categories: [Unity开发]
tags: [技术积累,使用说明]
description: 一款内置在Unity引擎中的Git提交助手
pin: false
---

## 使用说明

## 📖 目录

- [插件简介](#插件简介)
- [快速开始](#快速开始)
- [界面介绍](#界面介绍)
- [功能详解](#功能详解)
- [使用场景](#使用场景)
- [常见问题](#常见问题)
- [注意事项](#注意事项)

---

## 插件简介

**Git 助手** 是一款专为 Unity 编辑器设计的 Git 版本控制工具，提供直观的图形界面，让 Git 操作更加便捷高效。

### 主要解决的问题

- **无需离开 Unity**：在 Unity 编辑器内完成所有 Git 操作
- **可视化改动**：树状图清晰展示文件变更状态
- **简化工作流**：常用 Git 操作一键完成
- **历史记录查看**：快速浏览提交历史和远端版本

### 核心优势

- ✅ **直观的图形界面**：树状图展示文件变更，颜色编码区分状态
- ✅ **一站式操作**：查看、暂存、提交、推送、拉取都在一个窗口
- ✅ **智能提示**：自动检测分支、远端，提供操作建议
- ✅ **历史版本选择**：可视化选择远端历史版本进行拉取
- ✅ **多语言支持**：支持中文、英文、日文界面

---

## 快速开始

### 1. 前置要求

- 确保系统已安装 **Git** 并可在命令行中调用
- Unity 编辑器需要对项目根目录拥有读写权限
- 项目必须是 Git 仓库（已初始化）

### 2. 打开插件窗口

在 Unity 编辑器顶部菜单栏，点击 **`Tools` → `Git 助手`** 打开插件窗口。

### 3. 首次使用

1. 插件会自动检测当前分支和远端信息
2. 如果没有配置远端，可以在工具栏中手动输入
3. 查看左侧的变更列表，了解当前工作区状态
4. 开始使用各种 Git 操作

---

## 界面介绍

### 顶部工具栏

位于窗口最上方，包含常用操作按钮和配置选项：

- **刷新**：刷新 Git 状态、分支信息和提交历史
- **全部暂存**：执行 `git add -A`，暂存所有改动
- **拉取**：从远端拉取更新（会打开历史版本选择窗口）
- **远端**：显示和编辑当前远端名称
- **分支**：显示和编辑推送分支名称
- **帮助**：打开在线帮助文档
- **设置**（齿轮图标）：切换语言和打开项目设置

### 顶部信息卡片

显示当前 Git 仓库的关键信息：

- **当前分支**：显示你正在工作的分支
- **推送远端**：显示默认的推送远端名称
- **查看完整使用教程**：快速访问在线文档

### 左侧面板

#### 状态总览卡片

显示当前工作区的整体状态：

- **当前分支**：显示分支名称
- **状态摘要**：显示改动统计（如"已修改 5 · 新增 2"）
- **错误信息**：如果 Git 命令执行失败，会显示错误提示

#### 变更列表卡片

以树状图形式展示所有文件变更：

- **搜索框**：快速查找特定文件
- **变更统计**：顶部显示各类变更的数量和分布
- **文件树**：按目录分组显示所有改动的文件
- **颜色编码**：
  - 🟢 **绿色**：新增文件
  - 🔵 **蓝色**：已修改文件
  - 🔴 **红色**：已删除文件
  - 🟡 **黄色**：已重命名文件
  - 🟣 **紫色**：未跟踪文件

### 右侧面板

#### 提交信息卡片

用于编写提交信息和配置推送目标：

- **提交说明**：多行文本输入框，填写提交信息
- **推送目标**：
  - **远端**：选择或输入远端名称（如 `origin`）
  - **分支**：选择或输入分支名称（如 `main`）
  - **自定义远端地址**：如果仓库没有配置远端名称，可以输入完整的 Git URL
- **提交按钮**：提交当前改动
- **推送按钮**：推送到远端

#### 最近提交卡片

显示最近的提交历史：

- **时间线视图**：以时间线形式展示提交记录
- **提交信息**：显示提交消息、作者、时间和哈希值
- **作者标签**：不同作者使用不同颜色标识
- **自动滚动**：提交较多时自动出现滚动条

---

## 功能详解

### 🔄 刷新

点击工具栏的 **"刷新"** 按钮，插件会：

1. 重新读取 Git 状态（`git status`）
2. 更新当前分支信息
3. 刷新提交历史记录
4. 更新远端列表

**使用场景**：

- 在外部修改了文件后
- 执行了 Git 命令后
- 需要查看最新状态时

### 📦 全部暂存

点击工具栏的 **"全部暂存"** 按钮，会执行 `git add -A`，将所有改动（包括新增、修改、删除）添加到暂存区。

**注意**：这会暂存**所有**改动，包括未跟踪的文件。如果只想暂存部分文件，建议使用命令行或其他 Git 工具。

### 💾 提交

#### 编写提交信息

在右侧 **"提交信息"** 卡片中：

1. 在 **"提交说明"** 文本框中填写提交信息
2. 建议格式：
   - 第一行：简短描述（50 字以内）
   - 空行
   - 详细说明（可选）
   - 说明修改原因、影响和风险

**示例**：

```
修复：修复了角色移动时的卡顿问题

- 优化了物理引擎的更新频率
- 减少了不必要的碰撞检测
- 性能提升约 30%
```

#### 执行提交

1. 确保有改动可以提交（左侧变更列表不为空）
2. 填写提交说明
3. 点击 **"提交"** 按钮

插件会自动：

- 暂存所有改动（`git add -A`）
- 执行提交（`git commit -m "提交信息"`）
- 清空提交说明文本框
- 刷新状态

### 📤 推送

#### 配置推送目标

在 **"提交信息"** 卡片底部：

1. **使用远端名称**（默认）：
   - 在 **"远端"** 字段输入远端名称（如 `origin`）
   - 在 **"分支"** 字段输入分支名称（如 `main`）

2. **使用自定义远端地址**：
   - 勾选 **"使用自定义远端地址"**
   - 在 **"远端地址"** 字段输入完整的 Git URL
   - 例如：`https://github.com/username/repo.git`

#### 执行推送

1. 确保已配置推送目标
2. 点击 **"推送"** 按钮
3. 插件会执行 `git push <远端> <分支>`

**注意**：

- 推送前建议先拉取最新代码，避免冲突
- 如果远端分支不存在，可能需要先推送并设置上游分支

### 📥 拉取

点击工具栏的 **"拉取"** 按钮，会打开 **"选择拉取版本"** 窗口。

#### 选择拉取版本窗口

这个窗口允许你：

1. **查看远端历史**：显示远端仓库的提交历史
2. **选择目标版本**：点击选择要同步到的提交
3. **执行拉取**：点击 **"拉取所选版本"** 按钮

**工作流程**：

1. 插件会先执行 `git fetch` 获取远端最新信息
2. 然后执行 `git reset --hard <提交哈希>` 将本地代码重置到选择的版本

**⚠️ 警告**：`git reset --hard` 会**丢弃**本地所有未提交的改动！使用前请确保：

- 已提交所有重要改动
- 或已备份当前工作

#### 刷新远端历史

如果远端历史没有显示，可以：

1. 点击 **"重新获取"** 按钮
2. 检查远端和分支配置是否正确
3. 确保网络连接正常

### 🔍 搜索文件

在 **"变更列表"** 卡片顶部的搜索框中输入关键词，可以快速过滤文件。

**支持**：

- 文件名搜索
- 路径搜索
- 实时过滤

### ⚙️ 设置

点击工具栏右侧的 **设置图标**（齿轮），可以：

1. **切换语言**：
   - 简体中文
   - English
   - 日本語

2. **打开项目设置**：
   - 打开 Unity 项目设置窗口
   - 在 **"Project/Git 助手"** 中配置默认值

#### 项目设置

在 **`Edit` → `Project Settings` → `Git 助手`** 中可以配置：

- **默认远端名称**：窗口打开时的默认远端
- **默认推送分支**：窗口打开时的默认分支
- **自定义推送目标**：
  - 是否使用完整远端地址
  - 自定义推送地址

这些设置会作为窗口的默认值，你仍然可以在工具栏中随时覆盖。

### 📊 查看提交历史

在右侧 **"最近提交"** 卡片中：

- **时间线视图**：以时间线形式展示提交
- **提交详情**：显示提交消息、作者、相对时间和哈希值
- **作者标识**：不同作者使用不同颜色的标签
- **自动适应**：根据窗口高度自动调整显示数量

---

## 使用场景

### 场景 1：日常开发提交

**工作流程**：

1. 在 Unity 中修改代码或资源
2. 打开 Git 助手窗口
3. 查看左侧变更列表，确认改动
4. 在右侧填写提交说明
5. 点击 **"提交"** 按钮
6. 点击 **"推送"** 按钮推送到远端

**推荐配置**：

- 使用默认远端和分支
- 提交信息遵循团队规范

### 场景 2：查看改动状态

**工作流程**：

1. 打开 Git 助手窗口
2. 查看左侧 **"变更列表"** 卡片
3. 使用搜索框查找特定文件
4. 查看变更统计了解整体情况

**使用技巧**：

- 点击 **"刷新"** 获取最新状态
- 使用颜色编码快速识别变更类型

### 场景 3：同步远端代码

**工作流程**：

1. 打开 Git 助手窗口
2. 点击 **"拉取"** 按钮
3. 在历史版本窗口中选择目标版本
4. 点击 **"拉取所选版本"**

**注意事项**：

- ⚠️ 会丢弃本地未提交的改动
- 建议先提交或备份当前工作

### 场景 4：推送到不同远端

**工作流程**：

1. 在 **"提交信息"** 卡片中配置推送目标
2. 可以选择：
   - 使用远端名称（如 `origin`）
   - 使用自定义 Git URL
3. 点击 **"推送"** 按钮

**适用场景**：

- 推送到多个远端仓库
- 推送到临时测试仓库
- 仓库没有配置远端名称

### 场景 5：团队协作

**工作流程**：

1. 定期点击 **"刷新"** 查看最新状态
2. 查看 **"最近提交"** 了解团队进度
3. 提交前先拉取最新代码
4. 解决冲突后提交并推送

**最佳实践**：

- 提交前先刷新状态
- 推送前先拉取最新代码
- 使用清晰的提交信息
- 遵循团队的 Git 工作流规范

---

## 常见问题

### Q1: 插件无法检测到 Git 仓库？

**A**: 请检查以下几点：

1. **项目是否已初始化 Git**：
   - 在项目根目录执行 `git init`
   - 或确保项目根目录存在 `.git` 文件夹

2. **Git 是否已安装**：
   - 在命令行执行 `git --version` 确认
   - 确保 Git 在系统 PATH 中

3. **Unity 是否有权限**：
   - 确保 Unity 编辑器对项目目录有读写权限

### Q2: 为什么看不到远端信息？

**A**: 可能的原因：

1. **仓库未配置远端**：
   - 在命令行执行 `git remote -v` 查看
   - 如果没有，执行 `git remote add origin <URL>` 添加

2. **远端名称不匹配**：
   - 检查工具栏中的远端名称是否正确
   - 点击远端字段旁的 **"..."** 按钮查看可用远端

3. **点击刷新**：
   - 点击工具栏的 **"刷新"** 按钮重新检测

### Q3: 提交按钮是灰色的，无法点击？

**A**: 提交按钮需要满足以下条件：

1. **有改动可以提交**：左侧变更列表不为空
2. **填写了提交说明**：右侧提交说明文本框不为空

如果满足条件仍无法点击，尝试：

- 点击 **"刷新"** 更新状态
- 检查是否有错误信息显示

### Q4: 推送失败怎么办？

**A**: 常见原因和解决方法：

1. **远端未配置**：
   - 在工具栏或提交卡片中配置远端和分支
   - 确保远端名称正确

2. **权限问题**：
   - 检查是否有推送权限
   - 确认身份验证信息（SSH 密钥或 HTTPS 凭证）

3. **分支不存在**：
   - 首次推送可能需要设置上游分支
   - 在命令行执行：`git push -u origin <分支名>`

4. **查看错误信息**：
   - 查看窗口中的错误提示
   - 查看 Unity 控制台的详细错误信息

### Q5: 拉取操作会丢失我的改动吗？

**A**: **会的！** 拉取操作使用 `git reset --hard`，会**丢弃所有未提交的改动**。

**安全做法**：

1. **提交所有改动**：在拉取前先提交
2. **创建备份分支**：`git branch backup-<日期>`
3. **使用 Stash**：`git stash` 暂存改动，拉取后 `git stash pop`

### Q6: 如何只暂存部分文件？

**A**: 当前版本的 **"全部暂存"** 按钮会暂存所有改动。如果只想暂存部分文件：

1. **使用命令行**：

   ```bash
   git add <文件路径>
   ```

2. **使用其他 Git 工具**：
   - SourceTree
   - GitHub Desktop
   - VS Code 的 Git 扩展

3. **未来版本可能会支持**：在树状图中选择单个文件暂存

### Q7: 提交信息有格式要求吗？

**A**: 插件本身没有强制格式要求，但建议遵循团队规范。常见格式：

**格式 1：简洁型**

```
修复：修复了某个 bug
```

**格式 2：详细型**

```
修复：修复了角色移动时的卡顿问题

- 优化了物理引擎的更新频率
- 减少了不必要的碰撞检测
- 性能提升约 30%
```

**格式 3：约定式提交（Conventional Commits）**

```
fix: 修复角色移动卡顿

优化物理引擎更新频率，减少不必要的碰撞检测
```

### Q8: 可以撤销提交吗？

**A**: 插件本身不提供撤销功能，但可以使用命令行：

1. **撤销最后一次提交（保留改动）**：

   ```bash
   git reset --soft HEAD~1
   ```

2. **完全撤销最后一次提交**：

   ```bash
   git reset --hard HEAD~1
   ```

3. **修改最后一次提交**：

   ```bash
   git commit --amend
   ```

**注意**：如果已经推送到远端，撤销提交需要强制推送，可能影响其他团队成员。

### Q9: 如何切换分支？

**A**: 当前版本不提供分支切换功能。可以使用：

1. **命令行**：

   ```bash
   git checkout <分支名>
   ```

2. **其他 Git 工具**

切换分支后，点击插件的 **"刷新"** 按钮更新状态。

### Q10: 支持哪些 Git 操作？

**A**: 当前版本支持：

- ✅ 查看状态（status）
- ✅ 暂存改动（add）
- ✅ 提交（commit）
- ✅ 推送（push）
- ✅ 拉取（fetch + reset）

**暂不支持**：

- ❌ 分支切换（checkout）
- ❌ 合并（merge）
- ❌ 变基（rebase）
- ❌ 标签（tag）
- ❌ Stash

这些操作可以使用命令行或其他 Git 工具。

---

## 注意事项

### ⚠️ 重要提示

1. **备份重要数据**：
   - 使用 Git 前确保重要文件已备份
   - 拉取操作会丢弃未提交的改动

2. **团队协作**：
   - 推送前先拉取最新代码
   - 解决冲突后再推送
   - 遵循团队的 Git 工作流规范

3. **提交信息规范**：
   - 使用清晰的提交信息
   - 遵循团队或项目的提交规范
   - 避免无意义的提交信息

4. **权限管理**：
   - 确保有推送权限
   - 配置正确的身份验证（SSH 或 HTTPS）

5. **网络连接**：
   - 推送和拉取需要网络连接
   - 确保可以访问 Git 服务器

### 💡 最佳实践

1. **定期刷新**：
   - 在外部修改文件后刷新状态
   - 执行 Git 命令后刷新状态

2. **提交前检查**：
   - 查看变更列表确认改动
   - 检查是否有不需要提交的文件

3. **小步提交**：
   - 频繁提交小改动
   - 避免大量改动一次性提交

4. **清晰的提交信息**：
   - 说明修改原因
   - 说明影响范围
   - 说明潜在风险

5. **推送前测试**：
   - 确保代码可以正常编译
   - 确保没有破坏性改动

### 🔧 故障排除

如果遇到问题，可以尝试：

1. **刷新状态**：点击 **"刷新"** 按钮
2. **检查错误信息**：查看窗口中的错误提示
3. **查看控制台**：Unity 控制台可能有详细错误信息
4. **使用命令行**：在命令行执行相同操作，查看详细错误
5. **检查 Git 配置**：确保 Git 已正确安装和配置

---

## 技术支持

如果你在使用过程中遇到问题或有改进建议，可以通过以下方式联系：

- **帮助文档**：点击插件窗口右上角的 **"帮助"** 按钮
- **在线教程**：点击顶部信息卡片中的 **"查看完整使用教程"** 按钮
- **反馈邮箱**：`lyzbcy@qq.com`

---

## 更新日志

### v0.1.0

- 初始版本发布
- 支持查看 Git 状态和变更列表
- 支持暂存、提交、推送、拉取操作
- 支持多语言界面（中文、英文、日文）
- 支持可视化选择拉取版本
- 支持查看提交历史

---

**祝你使用愉快！** 🎉
